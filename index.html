<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Client Info (Base64 Only)</title>
  <style>
    body {
      font-family: monospace;
      background: #f5f5f5;
      padding: 2em;
    }
    textarea {
      width: 100%;
      height: 300px;
      padding: 1em;
      border: 1px solid #ccc;
      font-size: 14px;
      resize: vertical;
      border-radius: 6px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

<h1>üîê Client Info (Base64 Encoded)</h1>
<textarea id="b64" readonly>Loading...</textarea>

<script>
(async function gatherAndEncode() {
  const info = {};

  // Basic browser info
  info.userAgent = navigator.userAgent;
  info.platform = navigator.platform;
  info.appVersion = navigator.appVersion;
  info.vendor = navigator.vendor;
  info.languages = navigator.languages;
  info.language = navigator.language;

  // Display info
  info.screen = {
    width: screen.width,
    height: screen.height,
    devicePixelRatio: window.devicePixelRatio,
    viewportWidth: window.innerWidth,
    viewportHeight: window.innerHeight,
  };

  // System info
  info.hardwareConcurrency = navigator.hardwareConcurrency;
  info.deviceMemory = navigator.deviceMemory || 'unknown';
  info.maxTouchPoints = navigator.maxTouchPoints;
  info.onLine = navigator.onLine;

  // Locale & time
  info.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
  info.locale = Intl.NumberFormat().resolvedOptions().locale;

  // Feature detection
  info.features = {
    webAssembly: typeof WebAssembly !== 'undefined',
    bigint: typeof BigInt !== 'undefined',
    clipboard: !!navigator.clipboard,
    serviceWorker: 'serviceWorker' in navigator,
    fetch: typeof fetch === 'function'
  };

  // Storage info
  if (navigator.storage?.estimate) {
    const { quota, usage } = await navigator.storage.estimate();
    info.storage = { quota, usage };
  }

  // Network info
  const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
  if (conn) {
    info.network = {
      effectiveType: conn.effectiveType,
      downlink: conn.downlink,
      rtt: conn.rtt
    };
  }

  // Battery info
  if (navigator.getBattery) {
    try {
      const battery = await navigator.getBattery();
      info.battery = {
        level: battery.level,
        charging: battery.charging
      };
    } catch {}
  }

  // GPU info via WebGL
  try {
    const canvas = document.createElement('canvas');
    const gl = canvas.getContext('webgl');
    const debug = gl.getExtension('WEBGL_debug_renderer_info');
    if (debug) {
      info.gpu = {
        vendor: gl.getParameter(debug.UNMASKED_VENDOR_WEBGL),
        renderer: gl.getParameter(debug.UNMASKED_RENDERER_WEBGL)
      };
    }
  } catch {}

  // Canvas fingerprint
  try {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    ctx.textBaseline = 'top';
    ctx.font = '16px Arial';
    ctx.fillText('CanvasFingerprint', 2, 2);
    info.canvasFingerprint = canvas.toDataURL();
  } catch {}

  // Geolocation permission (if available)
  if (navigator.permissions) {
    try {
      const geoPerm = await navigator.permissions.query({ name: 'geolocation' });
      info.geolocationPermission = geoPerm.state;
    } catch {}
  }

  // Convert to base64
  const json = JSON.stringify(info, null, 2);
  const base64 = btoa(unescape(encodeURIComponent(json)));
  document.getElementById('b64').value = base64;
})();
</script>

</body>
</html>
